"use strict";angular.module("ngApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","leaflet-directive"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).otherwise({redirectTo:"/"})}]);var app=angular.module("ngApp");app.controller("MainCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),app.controller("TableCtrl",function(){this.selectedRow=null,this.selectedFeature=null,this.setClickedRow=function(a,b){this.selectedRow=a,this.selectedFeature=b}}),app.controller("MapCtrl",function(){this.center={lat:38.21,lng:-121.309,zoom:12},this.defaults={scrollWheelZoom:!1},this.events=null}),app.controller("SiteCtrl",["$http",function(a){var b=this;a.get("map_multi.geojson").then(function(a){b.geojson=a,b.features=b.geojson.data.features}),this.projects=[{name:"DEM",snippet:"Example",page:"/dem",year:"2015",variable:"topography"},{name:"Water Quality",snippet:"For monitoring...ex",page:"/wq",year:"2001",variable:"water"},{name:"Groundwater",snippet:"Groundwater wells",page:"/new",year:"2014",variable:"soil"},{name:"Stormwater sampling",snippet:"For monitoring...storms",page:"/wq",year:"2016",variable:"water"}]}]),app.controller("PickerCtrl",["$scope",function(a){a.clearSelections=function(){a.search.query="",a.search.variable=""}}]),app.filter("unique",["$parse",function(a){return function(b,c){if(c===!1)return b;if((c||angular.isUndefined(c))&&angular.isArray(b)){var d=[],e=angular.isString(c)?a(c):function(a){return a},f=function(a){return angular.isObject(a)?e(a):a};angular.forEach(b,function(a){for(var b=!1,c=0;c<d.length;c++)if(angular.equals(f(d[c]),f(a))){b=!0;break}b||d.push(a)}),b=d}return b}}]),angular.module("ngApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("ngApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/main.html",'<div ng-controller="SiteCtrl as sites"> <div class="row"> <div class="col-sm-3" id="sidebar"> <ul class="nav nav-stacked"> <li> <input ng-model="search.query" placeholder="Search"> </li> <li> <p>Filter by project type</p> <select class="selectpicker" ng-model="search.variable" ng-options=" feature.variable as feature.variable for feature in sites.projects | unique:\'variable\' | orderBy:\'variable\'" fix> <option value="" selected>-- All types --</option> </select> </li><li> </li><li> <div ng-controller="PickerCtrl as pick" class="form-group"> <button type="button" class="btn btn-grey" ng-click="clearSelections()">Clear Selections</button> </div> </li> </ul> </div> <div class="col-sm-9" id="mainCol"> <div ng-controller="MapCtrl as map"> <div style="height:300px"> <leaflet center="map.center" geojson="sites.geojson" events="map.events" width="100%" height="100%"></leaflet> </div> </div> <div style="padding: 20px"></div> <div ng-controller="TableCtrl as table"> <table border="1" style="width:100%"> <tr> <th><a href="" ng-click="orderByField = \'name\'; reverse=!reverse">Name</a></th> <th><a href="" ng-click="orderByField = \'variable\'; reverse=!reverse">Project Type</a></th> <th><a href="" ng-click="orderByField = \'year\'; reverse=!reverse">Year</a></th> </tr> <tr ng-repeat="feature in sites.projects | orderBy:orderByField:reverse | filter:search.variable " ng-class="{\'selected\':$index == table.selectedRow}" ng-click="table.setClickedRow($index)"> <td>{{feature.name}}</td> <td>{{feature.variable}}</td> <td>{{feature.year}}</td> </tr> </table> </div> </div> </div> </div>')}]);