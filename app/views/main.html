<div ng-controller="SiteCtrl as sites">
    <div class="row">
        <div class="col-md-1">
            Search: <input ng-model="query" type="text" />
        </div>
        <div ng-controller="MapCtrl as map" class="col-md-8 col-md-offset-3">
            <div style="height:300px;">
                      <leaflet center="map.center" geojson="sites.geojson" events="map.events" width="100%" height="100%"></leaflet>
                  </div>
        </div>

</div>



<div ng-controller="TableCtrl as table">
    <div>
        selectedRow = {{table.selectedRow}}
    </div>
  <div class='row'>
      <div class='col-md-8 col-md-offset-2'>
          <table border="1" style="width:100%">
              <tr>
                  <th><a href="" ng-click="orderByField = 'name'; reverse=!reverse">Name</a></th>
                  <th><a href="" ng-click="orderByField = 'snippet'; reverse=!reverse">Variable</a></th>
                  <th><a href="" ng-click="orderByField = 'year'; reverse=!reverse">Year</a></th>
              </tr>
              <tr ng-repeat="feature in sites.projects | orderBy:orderByField:reverse | filter:query" ng-class="{'selected':$index == table.selectedRow}" ng-click="table.setClickedRow($index)">
                  <td>{{feature.name}}</td>
                  <td>{{feature.snippet}}</td>
                  <td>{{feature.year}}</td>
              </tr>
          </table>
      </div>




  </div>

</div>
</div>
